---
title: GCP Cloud Deployment IAM Requirements
---

import { ArchitectureDiagram, ServiceDiagramSwitcher } from '@/components/ArchitectureDiagram'


## Background

Chalk enables innovative machine learning teams to focus on building
the unique products and models that make their business stand
out. Behind the scenes Chalk seamlessly handles data infrastructure
with a best-in-class developer experience.

Chalk is both a framework and a platform — developers can write code
using familiar Python packages, and deploy that code to Chalk’s
platform. In the Customer Cloud deployment, Chalk runs & administers its platform
on the customer’s cloud account. Chalk's managed infrastructure then executes-customer defined pipelines to compute
“[feature](<https://en.wikipedia.org/wiki/Feature_(machine_learning)>)”
data for machine learning applications. Chalk then serves this data
back to customer applications for online inference and to customer
data teams for training set generation.

## Architecture Diagram

<ServiceDiagramSwitcher default_option={"GCP"} />

## IAM Requirements

Chalk requires certain IAM permissions to manage infrastructure in your cloud account.
Typically, Chalk recommends:

- creating a new project in your GCP organization
- creating a new role in your root GCP organization with the permissions in this document
- granting Chalk's customer-scoped management service account the custom role

## Setup permissions

Chalk recommends creating a custom "role" in your organization with the following permissions granted.
At a high level, Chalk needs the ability to provision the key components of your infrastructure:

- Storage resources (buckets for dataset storage and bulk insertion into offline storage)
- Networking resources (LBs, VPCs, etc.)
- IAM resources (e.g. creating service accounts for workload identity, etc.)
- Kubernetes resources (GKE)
- Online storage (CloudSQL, or Memorystore, or Bigtable)
- Offline storage (typically BigQuery or Snowflake)

```txt
cloudbuild.builds.create
cloudbuild.builds.get
cloudbuild.builds.list
cloudbuild.builds.update
cloudbuild.integrations.get
cloudbuild.integrations.list
cloudnotifications.activities.list
cloudscheduler.jobs.create
cloudscheduler.jobs.get
cloudscheduler.locations.list
cloudsql.backupRuns.list
cloudsql.databases.get
cloudsql.databases.list
cloudsql.instances.clone
cloudsql.instances.create
cloudsql.instances.delete
cloudsql.instances.export
cloudsql.instances.failover
cloudsql.instances.get
cloudsql.instances.import
cloudsql.instances.list
cloudsql.instances.promoteReplica
cloudsql.instances.restart
cloudsql.instances.startReplica
cloudsql.instances.stopReplica
cloudsql.instances.update
cloudsql.sslCerts.get
cloudsql.users.create
cloudsql.users.delete
cloudsql.users.list
cloudsql.users.update
compute.acceleratorTypes.list
compute.addresses.create
compute.addresses.delete
compute.addresses.deleteInternal
compute.addresses.get
compute.addresses.list
compute.autoscalers.list
compute.autoscalers.update
compute.backendBuckets.create
compute.backendBuckets.list
compute.backendServices.create
compute.backendServices.delete
compute.backendServices.get
compute.backendServices.list
compute.backendServices.update
compute.backendServices.use
compute.diskTypes.list
compute.disks.create
compute.disks.delete
compute.disks.get
compute.disks.list
compute.disks.setLabels
compute.disks.useReadOnly
compute.firewallPolicies.create
compute.firewallPolicies.list
compute.firewalls.create
compute.firewalls.delete
compute.firewalls.get
compute.firewalls.list
compute.firewalls.update
compute.forwardingRules.create
compute.forwardingRules.delete
compute.forwardingRules.get
compute.forwardingRules.list
compute.globalAddresses.create
compute.globalAddresses.get
compute.globalAddresses.list
compute.globalForwardingRules.get
compute.globalForwardingRules.list
compute.globalNetworkEndpointGroups.attachNetworkEndpoints
compute.globalNetworkEndpointGroups.create
compute.globalNetworkEndpointGroups.delete
compute.globalNetworkEndpointGroups.detachNetworkEndpoints
compute.globalNetworkEndpointGroups.get
compute.globalNetworkEndpointGroups.list
compute.globalNetworkEndpointGroups.use
compute.globalOperations.get
compute.healthChecks.create
compute.healthChecks.get
compute.healthChecks.list
compute.healthChecks.useReadOnly
compute.httpHealthChecks.list
compute.httpsHealthChecks.list
compute.images.create
compute.images.get
compute.images.list
compute.images.useReadOnly
compute.instanceGroupManagers.create
compute.instanceGroupManagers.get
compute.instanceGroupManagers.list
compute.instanceGroupManagers.update
compute.instanceGroups.create
compute.instanceGroups.delete
compute.instanceGroups.get
compute.instanceGroups.list
compute.instanceGroups.update
compute.instanceTemplates.create
compute.instanceTemplates.get
compute.instanceTemplates.list
compute.instanceTemplates.useReadOnly
compute.instances.addAccessConfig
compute.instances.addResourcePolicies
compute.instances.attachDisk
compute.instances.create
compute.instances.delete
compute.instances.deleteAccessConfig
compute.instances.detachDisk
compute.instances.get
compute.instances.list
compute.instances.listEffectiveTags
compute.instances.listReferrers
compute.instances.osAdminLogin
compute.instances.osLogin
compute.instances.reset
compute.instances.resume
compute.instances.setDeletionProtection
compute.instances.setDiskAutoDelete
compute.instances.setLabels
compute.instances.setMachineResources
compute.instances.setMachineType
compute.instances.setMetadata
compute.instances.setMinCpuPlatform
compute.instances.setScheduling
compute.instances.setServiceAccount
compute.instances.setTags
compute.instances.start
compute.instances.stop
compute.instances.suspend
compute.instances.updateAccessConfig
compute.instances.updateDisplayDevice
compute.instances.updateNetworkInterface
compute.instances.updateShieldedInstanceConfig
compute.instances.use
compute.interconnectAttachments.list
compute.machineImages.create
compute.machineTypes.list
compute.networkEndpointGroups.create
compute.networkEndpointGroups.delete
compute.networkEndpointGroups.get
compute.networkEndpointGroups.list
compute.networkEndpointGroups.use
compute.networks.addPeering
compute.networks.create
compute.networks.delete
compute.networks.get
compute.networks.getEffectiveFirewalls
compute.networks.list
compute.networks.removePeering
compute.networks.switchToCustomMode
compute.networks.update
compute.networks.updatePolicy
compute.networks.use
compute.projects.get
compute.projects.setCommonInstanceMetadata
compute.regionBackendServices.create
compute.regionBackendServices.delete
compute.regionBackendServices.get
compute.regionBackendServices.list
compute.regionFirewallPolicies.create
compute.regionFirewallPolicies.list
compute.regionHealthChecks.create
compute.regionHealthChecks.list
compute.regionNetworkEndpointGroups.create
compute.regionNetworkEndpointGroups.get
compute.regionNetworkEndpointGroups.use
compute.regionOperations.get
compute.regions.list
compute.resourcePolicies.create
compute.resourcePolicies.delete
compute.resourcePolicies.get
compute.resourcePolicies.list
compute.resourcePolicies.use
compute.routers.delete
compute.routers.get
compute.routers.list
compute.routers.update
compute.routes.create
compute.routes.delete
compute.routes.list
compute.securityPolicies.create
compute.securityPolicies.list
compute.snapshots.list
compute.sslCertificates.create
compute.sslCertificates.delete
compute.sslCertificates.get
compute.sslCertificates.list
compute.sslPolicies.create
compute.sslPolicies.get
compute.sslPolicies.list
compute.subnetworks.create
compute.subnetworks.delete
compute.subnetworks.get
compute.subnetworks.list
compute.subnetworks.use
compute.subnetworks.useExternalIp
compute.targetHttpProxies.get
compute.targetHttpProxies.list
compute.targetHttpsProxies.get
compute.targetHttpsProxies.list
compute.targetPools.create
compute.targetPools.delete
compute.targetPools.get
compute.targetPools.list
compute.targetPools.update
compute.targetSslProxies.list
compute.targetTcpProxies.list
compute.urlMaps.create
compute.urlMaps.delete
compute.urlMaps.get
compute.urlMaps.list
compute.urlMaps.update
compute.vpnTunnels.list
compute.zoneOperations.get
compute.zones.list
container.apiServices.get
container.clusterRoleBindings.create
container.clusterRoleBindings.get
container.clusterRoles.bind
container.clusterRoles.create
container.clusterRoles.escalate
container.clusterRoles.get
container.clusterRoles.list
container.clusters.create
container.clusters.delete
container.clusters.get
container.clusters.getCredentials
container.clusters.list
container.clusters.listEffectiveTags
container.clusters.update
container.configMaps.create
container.configMaps.get
container.configMaps.list
container.cronJobs.list
container.customResourceDefinitions.get
container.customResourceDefinitions.list
container.daemonSets.create
container.daemonSets.get
container.daemonSets.list
container.deployments.create
container.deployments.delete
container.deployments.get
container.deployments.list
container.deployments.update
container.deployments.updateScale
container.endpoints.get
container.events.list
container.horizontalPodAutoscalers.delete
container.horizontalPodAutoscalers.get
container.horizontalPodAutoscalers.list
container.horizontalPodAutoscalers.update
container.ingresses.create
container.ingresses.get
container.ingresses.list
container.jobs.create
container.jobs.delete
container.jobs.get
container.jobs.list
container.leases.get
container.mutatingWebhookConfigurations.list
container.namespaces.create
container.namespaces.get
container.namespaces.list
container.nodes.delete
container.nodes.get
container.nodes.list
container.nodes.update
container.operations.get
container.operations.list
container.persistentVolumeClaims.get
container.persistentVolumeClaims.list
container.persistentVolumes.get
container.persistentVolumes.list
container.pods.delete
container.pods.exec
container.pods.get
container.pods.getLogs
container.pods.list
container.priorityClasses.create
container.priorityClasses.get
container.replicaSets.get
container.replicaSets.list
container.replicationControllers.list
container.roleBindings.create
container.roleBindings.get
container.roles.bind
container.roles.create
container.roles.escalate
container.roles.get
container.roles.list
container.secrets.create
container.secrets.delete
container.secrets.get
container.secrets.list
container.secrets.update
container.serviceAccounts.create
container.serviceAccounts.get
container.serviceAccounts.list
container.services.create
container.services.get
container.services.list
container.services.update
container.statefulSets.delete
container.statefulSets.get
container.statefulSets.list
container.statefulSets.update
container.statefulSets.updateScale
container.storageClasses.list
container.thirdPartyObjects.create
container.thirdPartyObjects.delete
container.thirdPartyObjects.get
container.thirdPartyObjects.list
container.thirdPartyObjects.update
eventarc.triggers.get
iam.roles.create
iam.roles.delete
iam.roles.get
iam.roles.list
iam.roles.undelete
iam.roles.update
iam.serviceAccountKeys.create
iam.serviceAccountKeys.delete
iam.serviceAccountKeys.get
iam.serviceAccountKeys.list
iam.serviceAccounts.actAs
iam.serviceAccounts.create
iam.serviceAccounts.delete
iam.serviceAccounts.disable
iam.serviceAccounts.enable
iam.serviceAccounts.get
iam.serviceAccounts.getIamPolicy
iam.serviceAccounts.list
iam.serviceAccounts.setIamPolicy
iam.serviceAccounts.update
logging.buckets.create
logging.buckets.delete
logging.buckets.get
logging.buckets.list
logging.buckets.undelete
logging.buckets.update
logging.links.create
logging.links.delete
logging.links.get
logging.links.list
logging.locations.list
logging.logEntries.create
logging.logEntries.download
logging.logEntries.list
logging.logServiceIndexes.list
logging.logServices.list
logging.operations.list
logging.privateLogEntries.list
logging.queries.create
logging.queries.delete
logging.queries.get
logging.queries.list
logging.queries.listShared
logging.queries.share
logging.queries.update
logging.queries.updateShared
logging.sinks.create
logging.sinks.delete
logging.sinks.get
logging.sinks.list
logging.sinks.update
logging.views.access
logging.views.get
logging.views.list
monitoring.alertPolicies.create
monitoring.alertPolicies.delete
monitoring.alertPolicies.get
monitoring.alertPolicies.list
monitoring.alertPolicies.update
monitoring.dashboards.create
monitoring.dashboards.get
monitoring.dashboards.list
monitoring.dashboards.update
monitoring.groups.list
monitoring.metricDescriptors.list
monitoring.monitoredResourceDescriptors.get
monitoring.monitoredResourceDescriptors.list
monitoring.notificationChannelDescriptors.list
monitoring.notificationChannels.list
monitoring.services.list
monitoring.slos.list
monitoring.timeSeries.list
monitoring.uptimeCheckConfigs.create
monitoring.uptimeCheckConfigs.list
opsconfigmonitoring.resourceMetadata.list
orgpolicy.policy.get
pubsub.snapshots.create
pubsub.snapshots.list
pubsub.subscriptions.consume
pubsub.subscriptions.create
pubsub.subscriptions.delete
pubsub.subscriptions.get
pubsub.subscriptions.getIamPolicy
pubsub.subscriptions.list
pubsub.subscriptions.setIamPolicy
pubsub.subscriptions.update
pubsub.topics.attachSubscription
pubsub.topics.create
pubsub.topics.delete
pubsub.topics.detachSubscription
pubsub.topics.get
pubsub.topics.getIamPolicy
pubsub.topics.list
pubsub.topics.publish
pubsub.topics.setIamPolicy
pubsub.topics.update
recommender.cloudsqlIdleInstanceRecommendations.list
recommender.cloudsqlInstanceOutOfDiskRecommendations.list
recommender.cloudsqlOverprovisionedInstanceRecommendations.list
recommender.containerDiagnosisInsights.get
recommender.containerDiagnosisInsights.list
recommender.containerDiagnosisRecommendations.get
recommender.containerDiagnosisRecommendations.list
recommender.containerDiagnosisRecommendations.update
recommender.runServiceIdentityRecommendations.list
recommender.runServiceIdentityRecommendations.update
redis.instances.create
redis.instances.delete
redis.instances.export
redis.instances.get
redis.instances.getAuthString
redis.instances.import
redis.instances.list
redis.instances.rescheduleMaintenance
redis.instances.update
redis.instances.updateAuth
redis.instances.upgrade
redis.operations.get
redis.operations.list
resourcemanager.projects.get
resourcemanager.projects.getIamPolicy
resourcemanager.projects.setIamPolicy
run.executions.get
run.jobs.create
run.jobs.delete
run.jobs.list
run.locations.list
run.revisions.delete
run.revisions.get
run.revisions.list
run.routes.list
run.services.create
run.services.delete
run.services.get
run.services.getIamPolicy
run.services.list
run.services.listEffectiveTags
run.services.listTagBindings
run.services.setIamPolicy
run.services.update
secretmanager.secrets.create
secretmanager.secrets.delete
secretmanager.secrets.get
secretmanager.secrets.getIamPolicy
secretmanager.secrets.list
secretmanager.secrets.setIamPolicy
secretmanager.secrets.update
secretmanager.versions.access
secretmanager.versions.add
secretmanager.versions.destroy
secretmanager.versions.disable
secretmanager.versions.enable
secretmanager.versions.get
secretmanager.versions.list
serviceusage.quotas.get
serviceusage.services.enable
serviceusage.services.get
serviceusage.services.list
stackdriver.projects.get
storage.buckets.create
storage.buckets.get
storage.buckets.getIamPolicy
storage.buckets.list
storage.buckets.listEffectiveTags
storage.buckets.setIamPolicy
storage.buckets.update
storage.objects.create
storage.objects.delete
storage.objects.get
storage.objects.getIamPolicy
storage.objects.list
vpcaccess.connectors.create
vpcaccess.connectors.delete
vpcaccess.connectors.get
vpcaccess.connectors.list
vpcaccess.locations.list
vpcaccess.operations.get
```

## Ongoing permissions

Chalk's support team will work with you to scope permissions down to what are needed for ongoing maintenance.
The precise details depend on the level of ongoing support that your team needs and your compliance requirements.
In principle, Chalk does not require ongoing access to data, or to the ability to edit IAM permissions,
but Chalk requires ongoing access to update the software deployed in your environment.
