---
title: Microsoft SQL Server
description: Integrate with Microsoft SQL Server data sources.
published: true
---

import { AddMSSQLIntegration } from '@/components/shared/mssql'
import {getEnvironmentVariableText, getNamedIntegrationText} from "@/components/NamedIntegration";

---

Chalk supports [Microsoft SQL Server](https://www.microsoft.com/en-us/sql-server)
and [Azure SQL Database](https://azure.microsoft.com/en-us/products/azure-sql/database/)
as a [SQL source](/docs/sql).
You can configure the Microsoft SQL Server-specific
options using the `MSSQLSource` **init** args,
or configure the source through your dashboard, and
reference the source in your code.

## Prerequisites

For local development, you'll need to install ODBC drivers:

- **macOS**: `brew install unixodbc`
- **Linux (Ubuntu/Debian)**: `sudo apt-get install unixodbc unixodbc-dev`
- **Linux (RHEL/CentOS)**: `sudo yum install unixODBC unixODBC-devel`

Then install the Python package: `pip install 'chalkpy[mssql]'`

Production deployments on Chalk handle ODBC drivers automatically.

## Adding Microsoft SQL Server

On the dashboard, you can plug in the configuration for your
Microsoft SQL Server database:

<AddMSSQLIntegration onSubmit={(e) => e.preventDefault()} />

### Authentication Methods

Chalk supports three authentication methods:

**SQL Authentication** - Traditional username and password authentication

**Azure AD Managed Identity** - When running in Azure (such as in AKS or Azure VMs), Chalk can automatically authenticate using [Managed Identity](https://learn.microsoft.com/en-us/entra/identity/managed-identities-azure-resources/overview). Simply omit authentication credentials when configuring your source.

**Azure AD Service Principal** - For authentication using an Azure AD application, provide `client_id`, `client_secret`, and `tenant_id`.

## Single Integration

If you have only one Microsoft SQL Server connection that you'd like
to add to Chalk, you do not need to specify any arguments
to construct the source in your code.

```py
from chalk.sql import MSSQLSource

mssql_source = MSSQLSource()
```

You can then use [SQL file resolvers](/docs/sql-resolvers) to query your database:

```sql
-- type: online
-- resolves: User
-- source: mssql
SELECT id, name, email FROM users
```

Or use the source directly in Python resolvers:

```py
@online
def fn(...) -> ...:
    return mssql_source.query(...).first()
```

## Multiple Integrations

<span>{getNamedIntegrationText()}</span>

```py
from chalk.sql import MSSQLSource

risk_source = MSSQLSource(name="risk")
marketing_source = MSSQLSource(name="marketing")
```

Then reference them in [SQL file resolvers](/docs/sql-resolvers) using the `name` parameter:

```sql
-- type: online
-- resolves: User
-- source: risk
SELECT id, credit_score FROM users
```

Or in Python resolvers:

```py
@online
def risk_resolver(...) -> ...:
    return risk_source.query(...).first()

@online
def marketing_resolver(...) -> ...:
    return marketing_source.query(...).first()
```

<span>{getEnvironmentVariableText("risk", "MSSQL_HOST")}</span>

## Environment Variables

You can also configure the integration directly using environment variables
on your local machine or from those added through the
[generic environment variable](/docs/env-vars) support.

### SQL Authentication

```py
import os
from chalk.sql import MSSQLSource

mssql_source = MSSQLSource(
    host=os.getenv("MSSQL_HOST"),
    port=os.getenv("MSSQL_TCP_PORT"),
    db=os.getenv("MSSQL_DATABASE"),
    user=os.getenv("MSSQL_USER"),
    password=os.getenv("MSSQL_PWD"),
)

@online
def fn(...) -> ...:
    return mssql_source.query(...).first()
```

### Azure AD Service Principal

```py
import os
from chalk.sql import MSSQLSource

mssql_source = MSSQLSource(
    host=os.getenv("MSSQL_HOST"),
    port=os.getenv("MSSQL_TCP_PORT"),
    db=os.getenv("MSSQL_DATABASE"),
    client_id=os.getenv("MSSQL_CLIENT_ID"),
    client_secret=os.getenv("MSSQL_CLIENT_SECRET"),
    tenant_id=os.getenv("MSSQL_TENANT_ID"),
)

@online
def fn(...) -> ...:
    return mssql_source.query(...).first()
```

### Managed Identity

```py
from chalk.sql import MSSQLSource

# Only connection details needed - authentication is automatic
mssql_source = MSSQLSource(
    host="myserver.database.windows.net",
    port=1433,
    db="mydatabase",
)

@online
def fn(...) -> ...:
    return mssql_source.query(...).first()
```
